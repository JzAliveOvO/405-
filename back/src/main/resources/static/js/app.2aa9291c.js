(function(){"use strict";var e={4866:function(e,t,n){var o=n(5130),s=n(6768);const a={id:"app"};function r(e,t,n,o,r,l){const i=(0,s.g2)("router-view");return(0,s.uX)(),(0,s.CE)("div",a,[(0,s.bF)(i)])}var l={name:"App"},i=n(1241);const u=(0,i.A)(l,[["render",r]]);var c=u,d=n(1387),m=n(1462),p=n(3236);const g=[{path:"/LoginDialog",name:p.A,component:p.A,meta:{requiresLayout:!0}},{path:"/Home",name:"Home",component:()=>Promise.resolve().then(n.bind(n,1462)),meta:{requiresLayout:!1}},{path:"/Personal",name:"Personal",component:()=>n.e(468).then(n.bind(n,1468)),meta:{requiresLayout:!1}},{path:"/Set",name:"Set",component:()=>n.e(688).then(n.bind(n,4688)),meta:{requiresLayout:!1}},{path:"/:pathMatch(.*)*",component:m["default"],meta:{requiresLayout:!0}}],f=(0,d.aE)({history:(0,d.LA)(),routes:g});var h=f,v=n(782),k=(0,v.y$)({state:{token:null},mutations:{setToken(e,t){e.token=t}},actions:{saveToken({commit:e},t){e("setToken",t)}},getters:{getToken(e){return e.token}}}),b=n(4373),y=n(3744),w=(n(4188),n(999)),C=n.n(w),L=n(7477);const _=(0,o.Ef)(c);for(const[A,F]of Object.entries(L))_.component(A,F);_.config.productionTip=!1,_.use(C()),_.use(y.A),_.use(h),_.use(k),b.A.defaults.baseURL="http://localhost:5000",b.A.defaults.timeout=5e3,_.config.globalProperties.$http=b.A,_.mount("#app")},9003:function(e,t,n){n.d(t,{A:function(){return f}});var o=n(6768);const s={class:"header-content"},a={class:"title-home"},r={class:"right-icons",style:{"margin-right":"10px"}};function l(e,t,n,l,i,u){const c=(0,o.g2)("House"),d=(0,o.g2)("el-icon"),m=(0,o.g2)("el-input"),p=(0,o.g2)("Avatar"),g=(0,o.g2)("Setting"),f=(0,o.g2)("login-dialog"),h=(0,o.g2)("el-header");return(0,o.uX)(),(0,o.Wv)(h,{class:"header"},{default:(0,o.k6)((()=>[(0,o.Lk)("div",s,[(0,o.Lk)("div",a,[t[3]||(t[3]=(0,o.Lk)("span",{class:"page-title",style:{"margin-left":"20px","margin-right":"20px"}},"405朋友圈",-1)),(0,o.Lk)("div",{class:"home-icon",onClick:t[0]||(t[0]=(...e)=>l.navigateToHome&&l.navigateToHome(...e)),style:{cursor:"pointer"}},[(0,o.bF)(d,{class:"large-icon"},{default:(0,o.k6)((()=>[(0,o.bF)(c)])),_:1}),t[2]||(t[2]=(0,o.Lk)("span",{style:{"margin-left":"5px"}},"首页",-1))])]),(0,o.bF)(m,{class:"search-input",placeholder:"搜索...",modelValue:l.searchQuery,"onUpdate:modelValue":t[1]||(t[1]=e=>l.searchQuery=e),"suffix-icon":"el-icon-search"},null,8,["modelValue"]),(0,o.Lk)("div",r,[(0,o.bF)(d,{onClick:l.handleAvatarClick,class:"icon large-icon"},{default:(0,o.k6)((()=>[(0,o.bF)(p)])),_:1},8,["onClick"]),(0,o.bF)(d,{onClick:l.navigateToSet,class:"icon large-icon"},{default:(0,o.k6)((()=>[(0,o.bF)(g)])),_:1},8,["onClick"])])]),(0,o.bF)(f,{onLoginSuccess:l.onLoginSuccess,ref:"loginDialog"},null,8,["onLoginSuccess"])])),_:1})}n(4114);var i=n(144),u=n(1387),c=n(7477),d=n(3236),m={components:{House:c.House,Avatar:c.Avatar,Setting:c.Setting,LoginDialog:d.A},setup(){const e=(0,u.rd)(),t=(0,i.KR)("");localStorage.removeItem("uid");const n=(0,i.KR)(null!==localStorage.getItem("uid")),o=(0,i.KR)(null),s=()=>{e.push({name:"Home"})},a=()=>{e.push({name:"Personal"})},r=()=>{e.push({name:"Set"})},l=()=>{n.value?a():o.value&&o.value.openDialog()},c=()=>{n.value=!0,a()};return{searchQuery:t,isLoggedIn:n,navigateToHome:s,navigateToPersonal:a,navigateToSet:r,handleAvatarClick:l,onLoginSuccess:c,loginDialog:o}}},p=n(1241);const g=(0,p.A)(m,[["render",l],["__scopeId","data-v-79145926"]]);var f=g},1462:function(e,t,n){n.r(t),n.d(t,{default:function(){return g}});var o=n(6768);const s={class:"common-layout"},a={class:"main"},r={class:"card-wrapper"};function l(e,t,n,l,i,u){const c=(0,o.g2)("Header"),d=(0,o.g2)("el-header"),m=(0,o.g2)("PostCard"),p=(0,o.g2)("el-card"),g=(0,o.g2)("el-main"),f=(0,o.g2)("el-container");return(0,o.uX)(),(0,o.CE)("div",s,[(0,o.bF)(f,null,{default:(0,o.k6)((()=>[(0,o.bF)(d,{class:"header"},{default:(0,o.k6)((()=>[(0,o.bF)(c)])),_:1}),(0,o.bF)(g,{style:{padding:"0px"}},{default:(0,o.k6)((()=>[(0,o.Lk)("div",a,[(0,o.Lk)("div",r,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.posts,(e=>((0,o.uX)(),(0,o.Wv)(p,{key:e.id,class:"post-card",style:{width:"850px","margin-bottom":"10px"}},{default:(0,o.k6)((()=>[(0,o.bF)(m,{post:e,onComment:l.handleComment,onLike:l.handleLike},null,8,["post","onComment","onLike"])])),_:2},1024)))),128))])])])),_:1})])),_:1})])}n(8992),n(2577);var i=n(9003),u=n(5069),c=n(144),d={components:{Header:i.A,PostCard:u.A},setup(){const e=(0,c.KR)([]),t=async()=>{e.value=[{id:1,user:{avatar:"https://via.placeholder.com/40",name:"用户A"},content:"这是一条说说内容，带有文字和图片。",image:"https://via.placeholder.com/200",publishTime:"2024-11-06 10:00:00",comments:[],likes:0},{id:2,user:{avatar:"https://via.placeholder.com/40",name:"用户B"},content:"这是另一条说说内容，包含图片。",image:"https://via.placeholder.com/200",publishTime:"2024-11-06 11:00:00",comments:[],likes:0}]};(0,o.sV)((()=>{t()}));const n=(e,t)=>{console.log(`评论说说 ${e}: ${t.content}`)},s=t=>{const n=e.value.find((e=>e.id===t));n&&(n.likes+=1)};return{posts:e,handleComment:n,handleLike:s}}},m=n(1241);const p=(0,m.A)(d,[["render",l],["__scopeId","data-v-39c68ef9"]]);var g=p},3236:function(e,t,n){n.d(t,{A:function(){return i}});var o=n(6768);function s(e,t,n,s,a,r){const l=(0,o.g2)("el-radio-button"),i=(0,o.g2)("el-radio-group"),u=(0,o.g2)("el-input"),c=(0,o.g2)("el-form-item"),d=(0,o.g2)("el-button"),m=(0,o.g2)("el-form"),p=(0,o.g2)("el-dialog");return(0,o.uX)(),(0,o.Wv)(p,{modelValue:a.dialogVisible,"onUpdate:modelValue":t[6]||(t[6]=e=>a.dialogVisible=e),width:"400px",onClose:r.resetForm},{default:(0,o.k6)((()=>[t[11]||(t[11]=(0,o.Lk)("h1",{style:{"text-align":"center"}},"欢迎使用",-1)),(0,o.bF)(i,{modelValue:a.choose,"onUpdate:modelValue":t[0]||(t[0]=e=>a.choose=e),class:"radioGroup",size:"small"},{default:(0,o.k6)((()=>[(0,o.bF)(l,{style:{"margin-bottom":"20px","margin-top":"18px"},type:"seccess",plain:"",label:"login"},{default:(0,o.k6)((()=>t[7]||(t[7]=[(0,o.eW)("登录")]))),_:1}),(0,o.bF)(l,{style:{"margin-bottom":"20px","margin-top":"18px"},type:"seccess",plain:"",label:"signIn"},{default:(0,o.k6)((()=>t[8]||(t[8]=[(0,o.eW)("注册")]))),_:1})])),_:1},8,["modelValue"]),(0,o.bF)(m,{"label-width":"90px",model:a.user},{default:(0,o.k6)((()=>["login"===a.choose?((0,o.uX)(),(0,o.Wv)(c,{key:0,label:"账号",prop:"tel",rules:[{required:!0,message:"请输入账号",trigger:"blur"}]},{default:(0,o.k6)((()=>[(0,o.bF)(u,{modelValue:a.user.tel,"onUpdate:modelValue":t[1]||(t[1]=e=>a.user.tel=e)},null,8,["modelValue"])])),_:1})):(0,o.Q3)("",!0),"signIn"===a.choose?((0,o.uX)(),(0,o.Wv)(c,{key:1,label:"账号",prop:"tel",rules:[{required:!0,message:"请输入账号",trigger:"blur"}]},{default:(0,o.k6)((()=>[(0,o.bF)(u,{modelValue:a.user.tel,"onUpdate:modelValue":t[2]||(t[2]=e=>a.user.tel=e)},null,8,["modelValue"])])),_:1})):(0,o.Q3)("",!0),(0,o.bF)(c,{label:"密码",prop:"password",rules:[{required:!0,message:"请输入密码",trigger:"blur"}]},{default:(0,o.k6)((()=>[(0,o.bF)(u,{type:"password",modelValue:a.user.password,"onUpdate:modelValue":t[3]||(t[3]=e=>a.user.password=e),"show-password":""},null,8,["modelValue"])])),_:1}),"signIn"===a.choose?((0,o.uX)(),(0,o.Wv)(c,{key:2,label:"确认密码",prop:"checkPassword",rules:[{required:!0,message:"请输入再次输入密码",trigger:"blur"}]},{default:(0,o.k6)((()=>[(0,o.bF)(u,{type:"password",modelValue:a.user.checkPassword,"onUpdate:modelValue":t[4]||(t[4]=e=>a.user.checkPassword=e),"show-password":""},null,8,["modelValue"])])),_:1})):(0,o.Q3)("",!0),"signIn"===a.choose?((0,o.uX)(),(0,o.Wv)(c,{key:3,label:"姓名",prop:"uname",rules:[{required:!0,message:"请输入姓名",trigger:"blur"}]},{default:(0,o.k6)((()=>[(0,o.bF)(u,{modelValue:a.user.uname,"onUpdate:modelValue":t[5]||(t[5]=e=>a.user.uname=e)},null,8,["modelValue"])])),_:1})):(0,o.Q3)("",!0),"login"===a.choose?((0,o.uX)(),(0,o.Wv)(d,{key:4,type:"success",onClick:r.login,disabled:""===a.user.tel||""===a.user.password,plain:""},{default:(0,o.k6)((()=>t[9]||(t[9]=[(0,o.eW)("登录 ")]))),_:1},8,["onClick","disabled"])):(0,o.Q3)("",!0),"signIn"===a.choose?((0,o.uX)(),(0,o.Wv)(d,{key:5,type:"success",plain:"",onClick:r.signIn,disabled:""===a.user.tel||""===a.user.password||""===a.user.checkPassword},{default:(0,o.k6)((()=>t[10]||(t[10]=[(0,o.eW)("注册 ")]))),_:1},8,["onClick","disabled"])):(0,o.Q3)("",!0)])),_:1},8,["model"])])),_:1},8,["modelValue","onClose"])}var a={data(){return{choose:"login",user:{uid:"",tel:"",password:"",checkPassword:"",uname:""},dialogVisible:!1}},methods:{openDialog(){this.dialogVisible=!0},resetForm(){this.user.uid="",this.user.tel="",this.user.password="",this.user.checkPassword="",this.user.uname=""},async signIn(){if(this.user.checkPassword===this.user.password)try{const e=await fetch("http://localhost:4050/register_user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.user)});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const t=await e.json();201===t.code?(this.$message.success("注册成功!"),localStorage.setItem("uid",t.data.uid),this.dialogVisible=!1):this.$message.error(t.message||"注册失败")}catch(e){console.error("请求失败：",e),this.$message.error("注册失败!")}else this.$message.error("两次输入的密码不一致!")},async login(){try{const e=await fetch("http://localhost:4050/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tel:this.user.tel,password:this.user.password})});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const t=await e.json();200===t.code?(localStorage.setItem("uid",t.data.uid),this.$message.success("登录成功!"),this.dialogVisible=!1,this.$emit("login-success")):this.$message.error("密码或账号错误!")}catch(e){console.error("请求失败：",e),this.$message.error("密码或账号错误!")}}}},r=n(1241);const l=(0,r.A)(a,[["render",s],["__scopeId","data-v-57084a68"]]);var i=l},5069:function(e,t,n){n.d(t,{A:function(){return T}});var o=n(6768),s=n(4232);const a={class:"post-card-container"},r={class:"header-section"},l=["src"],i={class:"user-info"},u={class:"user-name"},c={class:"publish-time"},d={class:"content-section"},m={class:"content"},p=["src"],g={class:"actions-section",style:{display:"flex","justify-content":"flex-end","align-items":"center"}},f={key:0,class:"comments-section"},h={class:"comment-input-section",style:{display:"flex","align-items":"flex-start"}},v=["src"],k={class:"comment-header"},b=["src"],y={class:"comment-info"},w={class:"comment-user-info"},C={class:"comment-user-name"},L={class:"comment-content"},_={class:"comment-time"};function A(e,t,n,A,F,x){const V=(0,o.g2)("Comment"),S=(0,o.g2)("el-icon"),T=(0,o.g2)("StarFilled"),P=(0,o.g2)("el-input"),E=(0,o.g2)("el-button");return(0,o.uX)(),(0,o.CE)("div",a,[(0,o.Lk)("div",r,[(0,o.Lk)("img",{src:n.post.user.avatar,alt:"Avatar",class:"avatar"},null,8,l),(0,o.Lk)("div",i,[(0,o.Lk)("span",u,(0,s.v_)(n.post.user.name),1),(0,o.Lk)("span",c,(0,s.v_)(n.post.publishTime),1)])]),(0,o.Lk)("div",d,[(0,o.Lk)("p",m,(0,s.v_)(n.post.content),1),n.post.image?((0,o.uX)(),(0,o.CE)("img",{key:0,src:n.post.image,alt:"Post Image",class:"post-image"},null,8,p)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",g,[(0,o.bF)(S,{onClick:A.toggleComments,style:{cursor:"pointer","margin-right":"10px","font-size":"24px"}},{default:(0,o.k6)((()=>[(0,o.bF)(V)])),_:1},8,["onClick"]),(0,o.bF)(S,{onClick:A.likePost,style:{cursor:"pointer","font-size":"24px"}},{default:(0,o.k6)((()=>[(0,o.bF)(T)])),_:1},8,["onClick"])]),A.showComments?((0,o.uX)(),(0,o.CE)("div",f,[(0,o.Lk)("div",h,[(0,o.Lk)("img",{src:A.currentUserAvatar,alt:"Avatar",class:"avatar",style:{width:"40px",height:"40px","border-radius":"50%"}},null,8,v),(0,o.bF)(P,{modelValue:A.newComment,"onUpdate:modelValue":t[0]||(t[0]=e=>A.newComment=e),placeholder:"发表评论",size:"large",class:"comment-input",style:{width:"610px","margin-left":"10px"}},null,8,["modelValue"]),(0,o.bF)(E,{round:"",onClick:A.submitComment,style:{"margin-left":"40px",height:"40px"}},{default:(0,o.k6)((()=>t[1]||(t[1]=[(0,o.eW)("评论")]))),_:1},8,["onClick"])]),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(A.localPost.comments,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{key:t,class:"comment-item"},[(0,o.Lk)("div",k,[(0,o.Lk)("img",{src:e.user.avatar,alt:"Avatar",class:"comment-avatar",style:{width:"30px",height:"30px","border-radius":"50%"}},null,8,b),(0,o.Lk)("div",y,[(0,o.Lk)("div",w,[(0,o.Lk)("span",C,(0,s.v_)(e.user.name)+":",1),(0,o.Lk)("span",L,(0,s.v_)(e.content),1)]),(0,o.Lk)("span",_,(0,s.v_)(e.time),1)])])])))),128))])):(0,o.Q3)("",!0)])}n(4114);var F=n(144),x={props:{post:Object},setup(e,{emit:t}){const n=(0,F.Kh)({...e.post}),s=(0,F.KR)(!1),a=(0,F.KR)(""),r=(0,F.KR)("https://via.placeholder.com/40"),l=()=>{s.value=!s.value},i=()=>{t("like",e.post.id)},u=()=>{if(a.value.trim()){const o={user:{avatar:r.value,name:"用户C"},content:a.value,time:(new Date).toLocaleString()};t("comment",e.post.id,o),n.comments.push(o),a.value=""}};return(0,o.nT)((()=>{n.comments=[...e.post.comments]})),{localPost:n,showComments:s,newComment:a,toggleComments:l,likePost:i,submitComment:u,currentUserAvatar:r}}},V=n(1241);const S=(0,V.A)(x,[["render",A],["__scopeId","data-v-a39c9a12"]]);var T=S}},t={};function n(o){var s=t[o];if(void 0!==s)return s.exports;var a=t[o]={exports:{}};return e[o].call(a.exports,a,a.exports,n),a.exports}n.m=e,function(){var e=[];n.O=function(t,o,s,a){if(!o){var r=1/0;for(c=0;c<e.length;c++){o=e[c][0],s=e[c][1],a=e[c][2];for(var l=!0,i=0;i<o.length;i++)(!1&a||r>=a)&&Object.keys(n.O).every((function(e){return n.O[e](o[i])}))?o.splice(i--,1):(l=!1,a<r&&(r=a));if(l){e.splice(c--,1);var u=s();void 0!==u&&(t=u)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[o,s,a]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,o){return n.f[o](e,t),t}),[]))}}(),function(){n.u=function(e){return"js/"+e+"."+{468:"306001c0",688:"dfde0f22"}[e]+".js"}}(),function(){n.miniCssF=function(e){return"css/"+e+"."+{468:"2a9151bc",688:"8bf655cd"}[e]+".css"}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="405quan:";n.l=function(o,s,a,r){if(e[o])e[o].push(s);else{var l,i;if(void 0!==a)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var d=u[c];if(d.getAttribute("src")==o||d.getAttribute("data-webpack")==t+a){l=d;break}}l||(i=!0,l=document.createElement("script"),l.charset="utf-8",l.timeout=120,n.nc&&l.setAttribute("nonce",n.nc),l.setAttribute("data-webpack",t+a),l.src=o),e[o]=[s];var m=function(t,n){l.onerror=l.onload=null,clearTimeout(p);var s=e[o];if(delete e[o],l.parentNode&&l.parentNode.removeChild(l),s&&s.forEach((function(e){return e(n)})),t)return t(n)},p=setTimeout(m.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=m.bind(null,l.onerror),l.onload=m.bind(null,l.onload),i&&document.head.appendChild(l)}}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.p="/"}(),function(){if("undefined"!==typeof document){var e=function(e,t,o,s,a){var r=document.createElement("link");r.rel="stylesheet",r.type="text/css",n.nc&&(r.nonce=n.nc);var l=function(n){if(r.onerror=r.onload=null,"load"===n.type)s();else{var o=n&&n.type,l=n&&n.target&&n.target.href||t,i=new Error("Loading CSS chunk "+e+" failed.\n("+o+": "+l+")");i.name="ChunkLoadError",i.code="CSS_CHUNK_LOAD_FAILED",i.type=o,i.request=l,r.parentNode&&r.parentNode.removeChild(r),a(i)}};return r.onerror=r.onload=l,r.href=t,o?o.parentNode.insertBefore(r,o.nextSibling):document.head.appendChild(r),r},t=function(e,t){for(var n=document.getElementsByTagName("link"),o=0;o<n.length;o++){var s=n[o],a=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(a===e||a===t))return s}var r=document.getElementsByTagName("style");for(o=0;o<r.length;o++){s=r[o],a=s.getAttribute("data-href");if(a===e||a===t)return s}},o=function(o){return new Promise((function(s,a){var r=n.miniCssF(o),l=n.p+r;if(t(r,l))return s();e(o,l,null,s,a)}))},s={524:0};n.f.miniCss=function(e,t){var n={468:1,688:1};s[e]?t.push(s[e]):0!==s[e]&&n[e]&&t.push(s[e]=o(e).then((function(){s[e]=0}),(function(t){throw delete s[e],t})))}}}(),function(){var e={524:0};n.f.j=function(t,o){var s=n.o(e,t)?e[t]:void 0;if(0!==s)if(s)o.push(s[2]);else{var a=new Promise((function(n,o){s=e[t]=[n,o]}));o.push(s[2]=a);var r=n.p+n.u(t),l=new Error,i=function(o){if(n.o(e,t)&&(s=e[t],0!==s&&(e[t]=void 0),s)){var a=o&&("load"===o.type?"missing":o.type),r=o&&o.target&&o.target.src;l.message="Loading chunk "+t+" failed.\n("+a+": "+r+")",l.name="ChunkLoadError",l.type=a,l.request=r,s[1](l)}};n.l(r,i,"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,o){var s,a,r=o[0],l=o[1],i=o[2],u=0;if(r.some((function(t){return 0!==e[t]}))){for(s in l)n.o(l,s)&&(n.m[s]=l[s]);if(i)var c=i(n)}for(t&&t(o);u<r.length;u++)a=r[u],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(c)},o=self["webpackChunk_405quan"]=self["webpackChunk_405quan"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[504],(function(){return n(4866)}));o=n.O(o)})();
//# sourceMappingURL=app.2aa9291c.js.map