{"version":3,"file":"js/648.013ca400.js","mappings":"6LACOA,MAAM,iB,GAMAA,MAAM,Q,GAEJA,MAAM,wB,GAEFA,MAAM,kB,EAXzB,Q,GAaqBA,MAAM,gB,GACHA,MAAM,gB,GACNA,MAAM,qB,GAGXA,MAAM,iB,GACJA,MAAM,gB,GAINA,MAAM,gB,GAINA,MAAM,gB,GASTA,MAAM,qB,EApCxB,Q,GAsDwBA,MAAM,gC,EAtD9B,Y,EAAA,Y,EAAA,Y,EAAA,Q,GA+FeA,MAAM,gB,qYA9FnBC,EAAAA,EAAAA,IAsGM,MAtGNC,EAsGM,EArGJC,EAAAA,EAAAA,IAoGeC,EAAA,MAtGnBC,SAAAC,EAAAA,EAAAA,KAGM,IAEY,EAFZH,EAAAA,EAAAA,IAEYI,EAAA,CAFDP,MAAM,UAAQ,CAH/BK,SAAAC,EAAAA,EAAAA,KAIQ,IAAU,EAAVH,EAAAA,EAAAA,IAAUK,MAJlBC,EAAA,KAMMN,EAAAA,EAAAA,IA+FUO,EAAA,CA/FDC,MAAA,iBAAqB,CANpCN,SAAAC,EAAAA,EAAAA,KAOQ,IA6FM,EA7FNM,EAAAA,EAAAA,IA6FM,MA7FNC,EA6FM,EA3FJD,EAAAA,EAAAA,IAwBM,MAxBNE,EAwBM,EAvBJX,EAAAA,EAAAA,IAsBUY,EAAA,CAtBDf,MAAM,eAAeW,MAAA,iB,CAV1CN,SAAAC,EAAAA,EAAAA,KAWc,IAMM,EANNM,EAAAA,EAAAA,IAMM,MANNI,EAMM,EALJJ,EAAAA,EAAAA,IAA8D,OAAxDK,IAAKC,EAAAC,KAAKC,OAAQC,IAAI,SAASrB,MAAM,kB,OAZ3DsB,IAagBV,EAAAA,EAAAA,IAGM,MAHNW,EAGM,EAFJX,EAAAA,EAAAA,IAAiD,OAAjDY,GAAiDC,EAAAA,EAAAA,IAAnBP,EAAAC,KAAKO,MAAI,IACvCd,EAAAA,EAAAA,IAA2D,OAA3De,GAA2DF,EAAAA,EAAAA,IAAxBP,EAAAC,KAAKS,WAAS,QAGrDhB,EAAAA,EAAAA,IAaM,MAbNiB,EAaM,EAZJjB,EAAAA,EAAAA,IAGM,MAHNkB,EAGM,cAFJlB,EAAAA,EAAAA,IAAqC,QAA/BZ,MAAM,cAAa,SAAK,KAC9BY,EAAAA,EAAAA,IAAkC,aAAAa,EAAAA,EAAAA,IAAzBP,EAAAC,KAAKY,YAAU,MAE1BnB,EAAAA,EAAAA,IAGM,MAHNoB,EAGM,cAFJpB,EAAAA,EAAAA,IAAqC,QAA/BZ,MAAM,cAAa,SAAK,KAC9BY,EAAAA,EAAAA,IAAqC,aAAAa,EAAAA,EAAAA,IAA5BP,EAAAC,KAAKc,eAAa,MAE7BrB,EAAAA,EAAAA,IAGM,MAHNsB,EAGM,cAFJtB,EAAAA,EAAAA,IAAqC,QAA/BZ,MAAM,cAAa,SAAK,KAC9BY,EAAAA,EAAAA,IAAkC,aAAAa,EAAAA,EAAAA,IAAzBP,EAAAC,KAAKgB,YAAU,UA7B1C1B,EAAA,OAoCaG,EAAAA,EAAAA,IAwDG,MAxDHwB,EAwDG,EAvDFjC,EAAAA,EAAAA,IAqDQY,EAAA,CArDCf,MAAM,iBAAiBW,MAAA,wC,CArC9CN,SAAAC,EAAAA,EAAAA,KAsCc,IAKE,EALFH,EAAAA,EAAAA,IAKEkC,EAAA,CAJAC,KAAK,WAvCrBC,WAwCyBrB,EAAAsB,eAxCzB,sBAAAC,EAAA,KAAAA,EAAA,GAAAC,GAwCyBxB,EAAAsB,eAAcE,GACvBC,YAAY,cACZC,KAAK,K,wBAEPzC,EAAAA,EAAAA,IAkCU0C,EAAA,CAjCRC,OAAO,GACP,YAAU,eACT,eAAa,EACb,YAAW5B,EAAA6B,e,CAGHC,MAAI1C,EAAAA,EAAAA,KACb,EADiB0C,UAAI,EACrBpC,EAAAA,EAAAA,IAwBM,aAvBJA,EAAAA,EAAAA,IAAqE,OAAhEZ,MAAM,iCAAkCiB,IAAK+B,EAAKC,IAAK5B,IAAI,I,OArDlF6B,IAsDkBtC,EAAAA,EAAAA,IAqBO,OArBPuC,EAqBO,EApBLvC,EAAAA,EAAAA,IAKO,QAJLZ,MAAM,+BACLoD,QAAKV,GAAExB,EAAAmC,yBAAyBL,I,EAEjC7C,EAAAA,EAAAA,IAA8BmD,EAAA,MA3DpDjD,SAAAC,EAAAA,EAAAA,KA2D+B,IAAW,EAAXH,EAAAA,EAAAA,IAAWoD,MA3D1C9C,EAAA,K,EAAA+C,GA8D6BtC,EAAAuC,UA9D7BC,EAAAA,EAAAA,IAAA,SA8DqC,WADjBzD,EAAAA,EAAAA,IAMO,QAnE3B0D,IAAA,EA+DsB3D,MAAM,8BACLoD,QAAKV,GAAExB,EAAA0C,eAAeZ,I,EAEvB7C,EAAAA,EAAAA,IAA+BmD,EAAA,MAlErDjD,SAAAC,EAAAA,EAAAA,KAkE+B,IAAY,EAAZH,EAAAA,EAAAA,IAAY0D,MAlE3CpD,EAAA,K,EAAAqD,IAqE6B5C,EAAAuC,UArE7BC,EAAAA,EAAAA,IAAA,SAqEqC,WADjBzD,EAAAA,EAAAA,IAMO,QA1E3B0D,IAAA,EAsEsB3D,MAAM,8BACLoD,QAAKV,GAAExB,EAAA6C,aAAaf,I,EAErB7C,EAAAA,EAAAA,IAA6BmD,EAAA,MAzEnDjD,SAAAC,EAAAA,EAAAA,KAyE+B,IAAU,EAAVH,EAAAA,EAAAA,IAAU6D,MAzEzCvD,EAAA,K,EAAAwD,WAAA5D,SAAAC,EAAAA,EAAAA,KAiDc,IAA2B,EAA3BH,EAAAA,EAAAA,IAA2BmD,EAAA,MAjDzCjD,SAAAC,EAAAA,EAAAA,KAiDuB,IAAQ,EAARH,EAAAA,EAAAA,IAAQ+D,MAjD/BzD,EAAA,OAAAA,EAAA,G,kBAgFYN,EAAAA,EAAAA,IAEYgE,EAAA,CAlFxB5B,WAgFgCrB,EAAAkD,cAhFhC,sBAAA3B,EAAA,KAAAA,EAAA,GAAAC,GAgFgCxB,EAAAkD,cAAa1B,I,CAhF7CrC,SAAAC,EAAAA,EAAAA,KAiFc,IAAwD,EAAxDM,EAAAA,EAAAA,IAAwD,OAAnD,YAAQK,IAAKC,EAAAmD,eAAgBhD,IAAI,iB,OAjFpDiD,MAAA7D,EAAA,G,mBAmFcN,EAAAA,EAAAA,IAMYoE,EAAA,CALVjC,KAAK,UACJc,QAAOlC,EAAAsD,YACR7D,MAAA,uB,CAtFhBN,SAAAC,EAAAA,EAAAA,KAuFe,IAEDmC,EAAA,KAAAA,EAAA,KAzFdgC,EAAAA,EAAAA,IAuFe,cAvFfhE,EAAA,G,kBAAAA,EAAA,OA+FUG,EAAAA,EAAAA,IAIM,MAJN8D,EAIM,gBAHJzE,EAAAA,EAAAA,IAEU0E,EAAAA,GAAA,MAlGtBC,EAAAA,EAAAA,IAgGoC1D,EAAA2D,OAARC,K,WAAhBC,EAAAA,EAAAA,IAEUhE,EAAA,CAFsB4C,IAAKmB,EAAKE,GAAIhF,MAAM,YAAYW,MAAA,wC,CAhG5EN,SAAAC,EAAAA,EAAAA,KAiGc,IAAqE,EAArEH,EAAAA,EAAAA,IAAqE8E,EAAA,CAA1DH,KAAMA,EAAOI,UAAShE,EAAAiE,cAAgBC,OAAMlE,EAAAmE,Y,yCAjGrE5E,EAAA,G,sBAAAA,EAAA,OAAAA,EAAA,K,8FAkHA,GACE6E,WAAY,CACVC,OAAM,IACNC,SAAQA,EAAAA,GAGVC,KAAAA,GACE,MAAMpB,GAAiBqB,EAAAA,EAAAA,IAAI,IACrBtB,GAAgBsB,EAAAA,EAAAA,KAAI,GACpBjC,GAAWiC,EAAAA,EAAAA,KAAI,GACfb,GAAQa,EAAAA,EAAAA,IAAI,IACZlD,GAAiBkD,EAAAA,EAAAA,IAAI,IACrBC,GAAgBD,EAAAA,EAAAA,IAAI,MACpBE,EAAMC,aAAaC,QAAQ,OAC3BC,GAAQL,EAAAA,EAAAA,IAAI,IAIZ3B,IAHY2B,EAAAA,EAAAA,IAAI,MAGA1C,IACpBgD,QAAQC,IAAIjD,EAAK,GAGbK,EAA4BL,IAChCqB,EAAe6B,MAAQlD,EAAKC,IAC5BmB,EAAc8B,OAAQ,EACtBF,QAAQC,IAAI5B,EAAe6B,MAAMlD,EAAKC,IAAI,EAGtCW,EAAkBZ,IACtBgD,QAAQC,IAAIjD,GACZgD,QAAQC,IAAIjD,EAAKmD,KACjB9B,EAAe6B,MAAQlD,EAAKmD,IAC5BH,QAAQC,IAAI5B,EAAe6B,MAAM,EAE7BnD,EAAiBC,IACrBqB,EAAe6B,MAAQlD,EAAKmD,IAC5BH,QAAQC,IAAIjD,EAAKmD,KACjBH,QAAQC,IAAI5B,EAAe6B,MAAM,EAG/BN,EACFI,QAAQC,IAAI,QAASL,GAErBI,QAAQC,IAAI,YAEd,MAAMG,EAAaC,UACjB,IACE,MAAMC,QAAiBC,MAAM,sCAAuC,CAClEC,OAAQ,MACRC,QAAS,CACT,eAAgB,sBAGpB,IAAKH,EAASI,GACd,MAAM,IAAIC,MAAM,uBAAuBL,EAASM,UAEhD,MAAMC,QAAaP,EAASQ,OAC5B,GAAkB,MAAdD,EAAKE,KAAc,CACrBf,QAAQC,IAAIY,GAEZ,MAAMG,EAAgBH,EAAKA,KAAKI,QAAOnC,GAAQA,EAAK3D,KAAKO,OAASqE,EAAMG,QAExErB,EAAMqB,MAAQc,EAEd7F,EAAK+E,MAAMnE,WAAa8C,EAAMqB,MAAMgB,OACpC/F,EAAK+E,MAAM/D,WAAa6E,EAAcG,QAAO,CAACC,EAAOtC,IAASsC,EAAQtC,EAAKuC,OAAO,EACpF,MACEC,EAAAA,GAAUC,MAAMV,EAAKW,SAAW,aAElC,CAAE,MAAOD,GACPvB,QAAQuB,MAAM,QAASA,GACvBD,EAAAA,GAAUC,MAAM,cAClB,GAGIE,EAAcpB,UAClB,IAAKT,EAGH,OAFA0B,EAAAA,GAAUC,MAAM,aAChBvB,QAAQC,IAAI,SAGd,IACE,MAAMK,QAAiBC,MAAM,2CAA2CX,IAAO,CAC7EY,OAAQ,MACRC,QAAS,CACP,eAAgB,sBAGpB,IAAKH,EAASI,GACZ,MAAM,IAAIC,MAAM,uBAAuBL,EAASM,UAElD,MAAMC,QAAaP,EAASQ,OACV,MAAdD,EAAKE,MACPf,QAAQC,IAAIY,EAAKW,SAEjBzB,EAAMG,MAAQW,EAAKA,KAAKd,OAGxBuB,EAAAA,GAAUC,MAAMV,EAAKW,SAAW,WAEpC,CAAE,MAAOD,GACPvB,QAAQuB,MAAM,QAASA,GACvBD,EAAAA,GAAUC,MAAM,YAClB,IAEFG,EAAAA,EAAAA,KAAU,KACRD,IACArB,GAAY,IAGd,MAAMjB,EAAgBA,CAACwC,EAAQC,KAC7B5B,QAAQC,IAAI,QAAQ0B,MAAWC,EAAQC,UAAU,EAG7CxC,EAAcsC,IAClB,MAAM7C,EAAOD,EAAMqB,MAAM4B,MAAKC,GAAKA,EAAE/C,KAAO2C,IACxC7C,IACFA,EAAKuC,OAAS,EAChB,EAGIlG,GAAOuE,EAAAA,EAAAA,IAAI,CACftE,OAAO,GACPM,KAAM,GACNE,UAAW,GACXG,WAAY,GACZE,cAAc,GACdE,WAAY,KAGRqC,EAAc6B,UAClB,IAAK7D,EAAe0D,MAElB,YADAoB,EAAAA,GAAUC,MAAM,WAKlB,MAAMS,EAAW,IAAIC,SACrBD,EAASE,OAAO,UAAW1F,EAAe0D,OAC1C8B,EAASE,OAAO,MAAOrC,aAAaC,QAAQ,QAC5CkC,EAASE,OAAO,QAAS7D,EAAe6B,OACxCF,QAAQC,IAAI5B,EAAe6B,OAG3B8B,EAASG,SAAQ,CAACjC,EAAOvC,KACvBqC,QAAQC,IAAItC,EAAKuC,EAAM,IAGzB,IACE,MAAMI,QAAiB8B,EAAAA,EAAMtD,KAAK,iCAAkCkD,EAAU,CAC5EvB,QAAS,CACP,eAAgB,yBAIO,MAAvBH,EAASO,KAAKE,MAChBO,EAAAA,GAAUe,QAAQ,SAClB7F,EAAe0D,MAAQ,GACvBP,EAAcO,MAAQ,MAEtBoB,EAAAA,GAAUC,MAAM,QAEpB,CAAE,MAAOA,GACPD,EAAAA,GAAUC,MAAM,QAClB,GAOF,MAAO,CACL1C,QACAM,gBACAE,aACAlE,OACAyE,MACA6B,cACA1B,QACAvD,iBACAmD,gBACAnB,cACAH,iBACAD,gBACAX,WACAM,eACAV,2BACAO,iBACAb,gBAEJ,G,UCzSF,MAAMuF,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://405quan/./src/components/Personal.vue","webpack://405quan/./src/components/Personal.vue?c4a7"],"sourcesContent":["<template>\r\n  <div class=\"common-layout\">\r\n    <el-container>\r\n      <el-header class=\"header\">\r\n        <Header />\r\n      </el-header>\r\n      <el-main style=\"padding: 0px;\">\r\n        <div class=\"main\">\r\n          <!-- 新增的自我介绍卡片，固定在左边 -->\r\n          <div class=\"profile-card-wrapper\">\r\n            <el-card class=\"profile-card\" style=\"width: 250px;\">\r\n              <div class=\"profile-header\">\r\n                <img :src=\"user.avatar\" alt=\"Avatar\" class=\"profile-avatar\" />\r\n                <div class=\"profile-info\">\r\n                  <span class=\"profile-name\">{{ user.name }}</span>\r\n                  <span class=\"profile-signature\">{{ user.signature }}</span>\r\n                </div>\r\n              </div>\r\n              <div class=\"profile-stats\">\r\n                <div class=\"profile-stat\">\r\n                  <span class=\"stat-label\">总说说数:</span>\r\n                  <span>{{ user.totalPosts }}</span>\r\n                </div>\r\n                <div class=\"profile-stat\">\r\n                  <span class=\"stat-label\">总访客量:</span>\r\n                  <span>{{ user.totalVisitors }}</span>\r\n                </div>\r\n                <div class=\"profile-stat\">\r\n                  <span class=\"stat-label\">总点赞量:</span>\r\n                  <span>{{ user.totalLikes }}</span>\r\n                </div>\r\n              </div>\r\n            </el-card>\r\n          </div>\r\n\r\n             <!-- 用于发表说说的卡片 -->\r\n             <div class=\"post-form-wrapper\">\r\n              <el-card class=\"post-form-card\" style=\"width: 850px; margin-bottom: 10px;\">\r\n              <el-input\r\n                type=\"textarea\"\r\n                v-model=\"newPostContent\"\r\n                placeholder=\"有什么新鲜事想分享吗？\"\r\n                rows=\"3\"\r\n              />\r\n              <el-upload \r\n                action=\"\" \r\n                list-type=\"picture-card\" \r\n                :auto-upload=\"false\"\r\n                :on-change=\"handleSuccess\">\r\n              <el-icon><Plus /></el-icon>\r\n\r\n              <template #file=\"{ file }\">\r\n                <div>\r\n                  <img class=\"el-upload-list__item-thumbnail\" :src=\"file.url\" alt=\"\" />\r\n                  <span class=\"el-upload-list__item-actions\">\r\n                    <span\r\n                      class=\"el-upload-list__item-preview\"\r\n                      @click=\"handlePictureCardPreview(file)\"\r\n                    >\r\n                      <el-icon><zoom-in /></el-icon>\r\n                    </span>\r\n                    <span\r\n                      v-if=\"!disabled\"\r\n                      class=\"el-upload-list__item-delete\"\r\n                      @click=\"handleDownload(file)\"\r\n                    >\r\n                      <el-icon><Download /></el-icon>\r\n                    </span>\r\n                    <span\r\n                      v-if=\"!disabled\"\r\n                      class=\"el-upload-list__item-delete\"\r\n                      @click=\"handleRemove(file)\"\r\n                    >\r\n                      <el-icon><Delete /></el-icon>\r\n                    </span>\r\n                  </span>\r\n                </div>\r\n              </template>\r\n            </el-upload>\r\n\r\n            <el-dialog v-model=\"dialogVisible\">\r\n              <img w-full :src=\"dialogImageUrl\" alt=\"Preview Image\" />\r\n            </el-dialog>\r\n              <el-button\r\n                type=\"primary\"\r\n                @click=\"publishPost\"\r\n                style=\"margin-top: 10px;\"\r\n              >\r\n                发表说说\r\n              </el-button>\r\n            </el-card>\r\n\r\n          </div>\r\n\r\n          <!-- 原来的说说卡片展示 -->\r\n          <div class=\"card-wrapper\">\r\n            <el-card v-for=\"post in posts\" :key=\"post.id\" class=\"post-card\" style=\"width: 850px; margin-bottom: 10px;\">\r\n              <PostCard :post=\"post\" @comment=\"handleComment\" @like=\"handleLike\" />\r\n            </el-card>\r\n          </div>\r\n        </div>\r\n      </el-main>\r\n    </el-container>\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\nimport Header from '@/components/Header.vue';\r\nimport PostCard from '@/components/PostCard.vue';\r\nimport axios from 'axios'\r\nimport { ref, onMounted } from 'vue';\r\nimport { ElMessage,Delete, Download, Plus, ZoomIn} from 'element-plus';\r\n\r\nexport default {\r\n  components: {\r\n    Header,\r\n    PostCard,\r\n  },\r\n  \r\n  setup() {\r\n    const dialogImageUrl = ref('')\r\n    const dialogVisible = ref(false)\r\n    const disabled = ref(false)\r\n    const posts = ref([]);\r\n    const newPostContent = ref(''); // 新增的说说内容\r\n    const uploadedImage = ref(null); // 上传的图片\r\n    const uid = localStorage.getItem('uid'); // 用户uid\r\n    const uname = ref('');\r\n    const uploadRef = ref(null);\r\n\r\n\r\n    const handleRemove = (file) => {\r\n      console.log(file)\r\n    }\r\n\r\n    const handlePictureCardPreview = (file) => {\r\n      dialogImageUrl.value = file.url\r\n      dialogVisible.value = true\r\n      console.log(dialogImageUrl.value,file.url)\r\n    }\r\n\r\n    const handleDownload = (file) => {\r\n      console.log(file)\r\n      console.log(file.raw)\r\n      dialogImageUrl.value = file.raw\r\n      console.log(dialogImageUrl.value)\r\n    }\r\n    const handleSuccess = (file) => {\r\n      dialogImageUrl.value = file.raw;\r\n      console.log(file.raw)\r\n      console.log(dialogImageUrl.value)\r\n    }\r\n    //检验uid是否存在\r\n    if (uid) {\r\n      console.log('用户ID:', uid);\r\n    } else {\r\n      console.log('没有找到用户ID');\r\n    }\r\n    const fetchPosts = async () => {\r\n      try {\r\n        const response = await fetch('http://localhost:4050/get_all_posts', {\r\n          method: 'GET',\r\n          headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n      });\r\n      if (!response.ok) {\r\n      throw new Error(`HTTP error! status: ${response.status}`);\r\n      }\r\n      const data = await response.json();\r\n      if (data.code === 200) {\r\n        console.log(data);\r\n        // 传递说说信息\r\n        const filteredPosts = data.data.filter(post => post.user.name === uname.value);\r\n        // 设置说说数据\r\n        posts.value = filteredPosts;\r\n        // 计算个人说说数量和个人总点赞数量\r\n        user.value.totalPosts = posts.value.length;\r\n        user.value.totalLikes = filteredPosts.reduce((total, post) => total + post.likes, 0);\r\n      } else {\r\n        ElMessage.error(data.message || \"获取个人说说信息失败\");\r\n      }\r\n      } catch (error) {\r\n        console.error('请求失败：', error);\r\n        ElMessage.error(\"获取个人说说信息失败!\");\r\n      }\r\n    };\r\n    // API获取用户数据\r\n    const getUserData = async () => {\r\n      if (!uid) {\r\n        ElMessage.error(\"用户丢失\");\r\n        console.log('缺少uid');\r\n        return;\r\n      }\r\n      try {\r\n        const response = await fetch(`http://localhost:4050/get_user_info?uid=${uid}`, {\r\n          method: 'GET',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n        });\r\n        if (!response.ok) {\r\n          throw new Error(`HTTP error! status: ${response.status}`);\r\n        }\r\n        const data = await response.json(); // 返回数据处理并且存储在 data 中\r\n        if (data.code === 200) { // 成功获取数据，对数据进行处理\r\n          console.log(data.message);\r\n          // 处理其他用户信息\r\n          uname.value = data.data.uname;\r\n\r\n        } else {\r\n          ElMessage.error(data.message || \"获取用户信息失败\");\r\n        }\r\n      } catch (error) {\r\n        console.error('请求失败：', error);\r\n        ElMessage.error(\"获取用户信息失败!\");\r\n      }\r\n    };\r\n    onMounted(() => {\r\n      getUserData();\r\n      fetchPosts();\r\n    });\r\n\r\n    const handleComment = (postId, comment) => {\r\n      console.log(`评论说说 ${postId}: ${comment.content}`);\r\n    };\r\n\r\n    const handleLike = (postId) => {\r\n      const post = posts.value.find(p => p.id === postId);\r\n      if (post) {\r\n        post.likes += 1;\r\n      }\r\n    };\r\n\r\n    const user = ref({\r\n      avatar:'',\r\n      name: '',\r\n      signature: '',\r\n      totalPosts: '',\r\n      totalVisitors:'',\r\n      totalLikes: ''\r\n    });\r\n\r\n    const publishPost = async () => {\r\n      if (!newPostContent.value) {\r\n        ElMessage.error('内容不能为空！');\r\n        return;\r\n      }\r\n\r\n      // 创建 FormData 对象并添加文本和图片字段\r\n      const formData = new FormData();\r\n      formData.append('content', newPostContent.value);\r\n      formData.append('uid', localStorage.getItem('uid'));\r\n      formData.append('image', dialogImageUrl.value);\r\n      console.log(dialogImageUrl.value);\r\n\r\n      // 调试：输出 FormData 内容\r\n      formData.forEach((value, key) => {\r\n        console.log(key, value);\r\n      });\r\n\r\n      try {\r\n        const response = await axios.post('http://localhost:4050/add_post', formData, {\r\n          headers: {\r\n            'Content-Type': 'multipart/form-data',\r\n          },\r\n        });\r\n\r\n        if (response.data.code === 200) {\r\n          ElMessage.success('发表成功！');\r\n          newPostContent.value = ''; // 清空输入框\r\n          uploadedImage.value = null; // 清空图片\r\n        } else {\r\n          ElMessage.error('发布失败！');\r\n        }\r\n      } catch (error) {\r\n        ElMessage.error('发布失败！');\r\n      }\r\n    };\r\n\r\n\r\n  \r\n\r\n\r\n    return {\r\n      posts,\r\n      handleComment,\r\n      handleLike,\r\n      user,\r\n      uid,\r\n      getUserData,\r\n      uname,\r\n      newPostContent,\r\n      uploadedImage,\r\n      publishPost,\r\n      dialogImageUrl,\r\n      dialogVisible,\r\n      disabled,\r\n      handleRemove,\r\n      handlePictureCardPreview,\r\n      handleDownload,\r\n      handleSuccess,\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.main {\r\n  width: 100%;\r\n  height: 90%; /* 减去 Header 的高度 */\r\n  background-color: #f0f0f0;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: flex-start;\r\n  padding-top: 10px;\r\n}\r\n\r\n.card-wrapper {\r\n  width: 70%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n\r\n.post-card {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.header {\r\n  position: sticky;\r\n  top: 0;\r\n  z-index: 10;\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\n.profile-card-wrapper {\r\n  position: sticky;\r\n  top: 100px; /* 固定位置，从 Header 底部开始 */\r\n  flex-shrink: 0;\r\n  margin-right: 0px;\r\n}\r\n\r\n.profile-card {\r\n  padding: 20px;\r\n  background-color: white;\r\n  border-radius: 8px;\r\n}\r\n\r\n.profile-header {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.profile-avatar {\r\n  width: 60px;\r\n  height: 60px;\r\n  border-radius: 50%;\r\n  margin-right: 15px;\r\n}\r\n\r\n.profile-info {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.profile-name {\r\n  font-weight: bold;\r\n  font-size: 18px;\r\n}\r\n\r\n.profile-signature {\r\n  font-size: 14px;\r\n  color: #888;\r\n}\r\n\r\n.profile-stats {\r\n  margin-top: 20px;\r\n}\r\n\r\n.profile-stat {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.stat-label {\r\n  font-weight: bold;\r\n}\r\n\r\n.card-wrapper {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n\r\n.post-form-wrapper {\r\n  width: 70%;\r\n  display: flex;\r\n  justify-content: center;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.post-form-card {\r\n  width: 100%;\r\n}\r\n\r\n.upload-demo {\r\n  margin-top: 10px;\r\n}\r\n</style>\r\n","import { render } from \"./Personal.vue?vue&type=template&id=5b319889&scoped=true\"\nimport script from \"./Personal.vue?vue&type=script&lang=js\"\nexport * from \"./Personal.vue?vue&type=script&lang=js\"\n\nimport \"./Personal.vue?vue&type=style&index=0&id=5b319889&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5b319889\"]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","_createVNode","_component_el_container","default","_withCtx","_component_el_header","_component_Header","_","_component_el_main","style","_createElementVNode","_hoisted_2","_hoisted_3","_component_el_card","_hoisted_4","src","$setup","user","avatar","alt","_hoisted_5","_hoisted_6","_hoisted_7","_toDisplayString","name","_hoisted_8","signature","_hoisted_9","_hoisted_10","totalPosts","_hoisted_11","totalVisitors","_hoisted_12","totalLikes","_hoisted_13","_component_el_input","type","modelValue","newPostContent","_cache","$event","placeholder","rows","_component_el_upload","action","handleSuccess","file","url","_hoisted_14","_hoisted_15","onClick","handlePictureCardPreview","_component_el_icon","_component_zoom_in","_hoisted_16","disabled","_createCommentVNode","key","handleDownload","_component_Download","_hoisted_17","handleRemove","_component_Delete","_hoisted_18","_component_Plus","_component_el_dialog","dialogVisible","dialogImageUrl","_hoisted_19","_component_el_button","publishPost","_createTextVNode","_hoisted_20","_Fragment","_renderList","posts","post","_createBlock","id","_component_PostCard","onComment","handleComment","onLike","handleLike","components","Header","PostCard","setup","ref","uploadedImage","uid","localStorage","getItem","uname","console","log","value","raw","fetchPosts","async","response","fetch","method","headers","ok","Error","status","data","json","code","filteredPosts","filter","length","reduce","total","likes","ElMessage","error","message","getUserData","onMounted","postId","comment","content","find","p","formData","FormData","append","forEach","axios","success","__exports__","render"],"sourceRoot":""}