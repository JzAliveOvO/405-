(function(){"use strict";var e={54866:function(e,t,n){var r=n(81587),o=(n(23792),n(3362),n(69085),n(9391),n(5506),n(45130)),a=n(56768),s={id:"app"};function u(e,t,n,r,o,u){var c=(0,a.g2)("router-view");return(0,a.uX)(),(0,a.CE)("div",s,[(0,a.bF)(c)])}var c={name:"App"},i=n(71241);const l=(0,i.A)(c,[["render",u]]);for(var d=l,p=(n(26099),n(47764),n(62953),n(81387)),f=n(14419),m=n(93236),h=[{path:"/LoginDialog",name:m.A,component:m.A,meta:{requiresLayout:!0}},{path:"/Home",name:"Home",component:function(){return Promise.resolve().then(n.bind(n,14419))},meta:{requiresLayout:!1}},{path:"/Personal",name:"Personal",component:function(){return n.e(648).then(n.bind(n,92648))},meta:{requiresLayout:!1}},{path:"/Set",name:"Set",component:function(){return n.e(91).then(n.bind(n,33091))},meta:{requiresLayout:!1}},{path:"/:pathMatch(.*)*",component:f["default"],meta:{requiresLayout:!0}}],g=(0,p.aE)({history:(0,p.LA)(),routes:h}),v=g,k=n(60782),b=(0,k.y$)({state:{token:null},mutations:{setToken:function(e,t){e.token=t}},actions:{saveToken:function(e,t){var n=e.commit;n("setToken",t)}},getters:{getToken:function(e){return e.token}}}),y=n(36966),x=n(3744),w=(n(4188),n(10999)),A=n.n(w),_=n(57477),C=(0,o.Ef)(d),L=0,T=Object.entries(_);L<T.length;L++){var S=(0,r.A)(T[L],2),P=S[0],F=S[1];C.component(P,F)}C.config.productionTip=!1,C.use(A()),C.use(x.A),C.use(v),C.use(b),y.A.defaults.baseURL="http://localhost:5000",y.A.defaults.timeout=5e3,C.config.globalProperties.$http=y.A,C.mount("#app")},98352:function(e,t,n){n.d(t,{A:function(){return h}});var r=n(56768),o={class:"header-content"},a={class:"title-home"},s={class:"right-icons",style:{"margin-right":"10px"}};function u(e,t,n,u,c,i){var l=(0,r.g2)("House"),d=(0,r.g2)("el-icon"),p=(0,r.g2)("el-input"),f=(0,r.g2)("Avatar"),m=(0,r.g2)("Setting"),h=(0,r.g2)("login-dialog"),g=(0,r.g2)("el-header");return(0,r.uX)(),(0,r.Wv)(g,{class:"header"},{default:(0,r.k6)((function(){return[(0,r.Lk)("div",o,[(0,r.Lk)("div",a,[t[3]||(t[3]=(0,r.Lk)("span",{class:"page-title",style:{"margin-left":"20px","margin-right":"20px"}},"405朋友圈",-1)),(0,r.Lk)("div",{class:"home-icon",onClick:t[0]||(t[0]=function(){return u.navigateToHome&&u.navigateToHome.apply(u,arguments)}),style:{cursor:"pointer"}},[(0,r.bF)(d,{class:"large-icon"},{default:(0,r.k6)((function(){return[(0,r.bF)(l)]})),_:1}),t[2]||(t[2]=(0,r.Lk)("span",{style:{"margin-left":"5px"}},"首页",-1))])]),(0,r.bF)(p,{class:"search-input",placeholder:"搜索...",modelValue:u.searchQuery,"onUpdate:modelValue":t[1]||(t[1]=function(e){return u.searchQuery=e}),"suffix-icon":"el-icon-search"},null,8,["modelValue"]),(0,r.Lk)("div",s,[(0,r.bF)(d,{onClick:u.handleAvatarClick,class:"icon large-icon"},{default:(0,r.k6)((function(){return[(0,r.bF)(f)]})),_:1},8,["onClick"]),(0,r.bF)(d,{onClick:u.navigateToSet,class:"icon large-icon"},{default:(0,r.k6)((function(){return[(0,r.bF)(m)]})),_:1},8,["onClick"])])]),(0,r.bF)(h,{onLoginSuccess:u.onLoginSuccess,ref:"loginDialog"},null,8,["onLoginSuccess"])]})),_:1})}n(44114);var c=n(90144),i=n(81387),l=n(57477),d=n(93236),p={components:{House:l.House,Avatar:l.Avatar,Setting:l.Setting,LoginDialog:d.A},setup:function(){var e=(0,i.rd)(),t=(0,c.KR)(""),n=(0,c.KR)(null!==localStorage.getItem("uid")),r=(0,c.KR)(null),o=function(){e.push({name:"Home"})},a=function(){e.push({name:"Personal"})},s=function(){e.push({name:"Set"})},u=function(){n.value?a():r.value&&r.value.openDialog()},l=function(){n.value=!0,a()};return{searchQuery:t,isLoggedIn:n,navigateToHome:o,navigateToPersonal:a,navigateToSet:s,handleAvatarClick:u,onLoginSuccess:l,loginDialog:r}}},f=n(71241);const m=(0,f.A)(p,[["render",u],["__scopeId","data-v-34b131da"]]);var h=m},14419:function(e,t,n){n.r(t),n.d(t,{default:function(){return v}});var r=n(56768),o={class:"common-layout"},a={class:"main"},s={class:"card-wrapper"};function u(e,t,n,u,c,i){var l=(0,r.g2)("Header"),d=(0,r.g2)("el-header"),p=(0,r.g2)("PostCard"),f=(0,r.g2)("el-card"),m=(0,r.g2)("el-main"),h=(0,r.g2)("el-container");return(0,r.uX)(),(0,r.CE)("div",o,[(0,r.bF)(h,null,{default:(0,r.k6)((function(){return[(0,r.bF)(d,{class:"header"},{default:(0,r.k6)((function(){return[(0,r.bF)(l)]})),_:1}),(0,r.bF)(m,{style:{padding:"0px"}},{default:(0,r.k6)((function(){return[(0,r.Lk)("div",a,[(0,r.Lk)("div",s,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(u.posts,(function(e){return(0,r.uX)(),(0,r.Wv)(f,{key:e.id,class:"post-card",style:{width:"850px","margin-bottom":"10px"}},{default:(0,r.k6)((function(){return[(0,r.bF)(p,{post:e,onComment:u.handleComment,onLike:u.handleLike},null,8,["post","onComment","onLike"])]})),_:2},1024)})),128))])])]})),_:1})]})),_:1})])}var c=n(14048),i=n(30388),l=(n(16280),n(33110),n(26099),n(98352)),d=n(61475),p=n(90144),f=n(51219),m={components:{Header:l.A,PostCard:d.A},setup:function(){var e=(0,p.KR)([]),t=function(){var t=(0,i.A)((0,c.A)().mark((function t(){var n,r;return(0,c.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("http://localhost:4050/get_all_posts",{method:"GET",headers:{"Content-Type":"application/json"}});case 3:if(n=t.sent,n.ok){t.next=6;break}throw new Error("HTTP error! status: ".concat(n.status));case 6:return t.next=8,n.json();case 8:r=t.sent,200===r.code?(console.log(r.message),e.value=r.data):f.nk.error(r.message||"获取说说信息失败"),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](0),console.error("网络错误:",t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}();(0,r.sV)((function(){t()}));var n=function(){var n=(0,i.A)((0,c.A)().mark((function n(r,o){var a,s;return(0,c.A)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,fetch("/api/comments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uid:localStorage.getItem("uid"),postId:r,c_info:o.content,c_time:(new Date).toLocaleString()})});case 3:if(a=n.sent,a.ok){n.next=6;break}throw new Error("HTTP error! status: ".concat(a.status));case 6:return n.next=8,a.json();case 8:s=n.sent,200===s.code?(console.log("评论成功: ".concat(o.content)),t(),e.value=s.data):f.nk.error(s.message||"评论发送失败"),n.next=15;break;case 12:n.prev=12,n.t0=n["catch"](0),console.error("评论提交错误:",n.t0);case 15:case"end":return n.stop()}}),n,null,[[0,12]])})));return function(e,t){return n.apply(this,arguments)}}(),o=function(){var e=(0,i.A)((0,c.A)().mark((function e(t){var n;return(0,c.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/like/".concat(t),{method:"POST"});case 3:n=e.sent,n.ok?console.log("点赞成功"):console.error("点赞失败"),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.error("点赞请求失败:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return{posts:e,handleComment:n,handleLike:o}}},h=n(71241);const g=(0,h.A)(m,[["render",u],["__scopeId","data-v-63fac379"]]);var v=g},93236:function(e,t,n){n.d(t,{A:function(){return l}});var r=n(56768);function o(e,t,n,o,a,s){var u=(0,r.g2)("el-radio-button"),c=(0,r.g2)("el-radio-group"),i=(0,r.g2)("el-input"),l=(0,r.g2)("el-form-item"),d=(0,r.g2)("el-button"),p=(0,r.g2)("el-form"),f=(0,r.g2)("el-dialog");return(0,r.uX)(),(0,r.Wv)(f,{modelValue:a.dialogVisible,"onUpdate:modelValue":t[6]||(t[6]=function(e){return a.dialogVisible=e}),width:"400px",onClose:s.resetForm},{default:(0,r.k6)((function(){return[t[11]||(t[11]=(0,r.Lk)("h1",{style:{"text-align":"center"}},"欢迎使用",-1)),(0,r.bF)(c,{modelValue:a.choose,"onUpdate:modelValue":t[0]||(t[0]=function(e){return a.choose=e}),class:"radioGroup",size:"small"},{default:(0,r.k6)((function(){return[(0,r.bF)(u,{style:{"margin-bottom":"20px","margin-top":"18px"},type:"seccess",plain:"",label:"login"},{default:(0,r.k6)((function(){return t[7]||(t[7]=[(0,r.eW)("登录")])})),_:1}),(0,r.bF)(u,{style:{"margin-bottom":"20px","margin-top":"18px"},type:"seccess",plain:"",label:"signIn"},{default:(0,r.k6)((function(){return t[8]||(t[8]=[(0,r.eW)("注册")])})),_:1})]})),_:1},8,["modelValue"]),(0,r.bF)(p,{"label-width":"90px",model:a.user},{default:(0,r.k6)((function(){return["login"===a.choose?((0,r.uX)(),(0,r.Wv)(l,{key:0,label:"账号",prop:"tel",rules:[{required:!0,message:"请输入账号",trigger:"blur"}]},{default:(0,r.k6)((function(){return[(0,r.bF)(i,{modelValue:a.user.tel,"onUpdate:modelValue":t[1]||(t[1]=function(e){return a.user.tel=e})},null,8,["modelValue"])]})),_:1})):(0,r.Q3)("",!0),"signIn"===a.choose?((0,r.uX)(),(0,r.Wv)(l,{key:1,label:"账号",prop:"tel",rules:[{required:!0,message:"请输入账号",trigger:"blur"}]},{default:(0,r.k6)((function(){return[(0,r.bF)(i,{modelValue:a.user.tel,"onUpdate:modelValue":t[2]||(t[2]=function(e){return a.user.tel=e})},null,8,["modelValue"])]})),_:1})):(0,r.Q3)("",!0),(0,r.bF)(l,{label:"密码",prop:"password",rules:[{required:!0,message:"请输入密码",trigger:"blur"}]},{default:(0,r.k6)((function(){return[(0,r.bF)(i,{type:"password",modelValue:a.user.password,"onUpdate:modelValue":t[3]||(t[3]=function(e){return a.user.password=e}),"show-password":""},null,8,["modelValue"])]})),_:1}),"signIn"===a.choose?((0,r.uX)(),(0,r.Wv)(l,{key:2,label:"确认密码",prop:"checkPassword",rules:[{required:!0,message:"请输入再次输入密码",trigger:"blur"}]},{default:(0,r.k6)((function(){return[(0,r.bF)(i,{type:"password",modelValue:a.user.checkPassword,"onUpdate:modelValue":t[4]||(t[4]=function(e){return a.user.checkPassword=e}),"show-password":""},null,8,["modelValue"])]})),_:1})):(0,r.Q3)("",!0),"signIn"===a.choose?((0,r.uX)(),(0,r.Wv)(l,{key:3,label:"姓名",prop:"uname",rules:[{required:!0,message:"请输入姓名",trigger:"blur"}]},{default:(0,r.k6)((function(){return[(0,r.bF)(i,{modelValue:a.user.uname,"onUpdate:modelValue":t[5]||(t[5]=function(e){return a.user.uname=e})},null,8,["modelValue"])]})),_:1})):(0,r.Q3)("",!0),"login"===a.choose?((0,r.uX)(),(0,r.Wv)(d,{key:4,type:"success",onClick:s.login,disabled:""===a.user.tel||""===a.user.password,plain:""},{default:(0,r.k6)((function(){return t[9]||(t[9]=[(0,r.eW)("登录 ")])})),_:1},8,["onClick","disabled"])):(0,r.Q3)("",!0),"signIn"===a.choose?((0,r.uX)(),(0,r.Wv)(d,{key:5,type:"success",plain:"",onClick:s.signIn,disabled:""===a.user.tel||""===a.user.password||""===a.user.checkPassword},{default:(0,r.k6)((function(){return t[10]||(t[10]=[(0,r.eW)("注册 ")])})),_:1},8,["onClick","disabled"])):(0,r.Q3)("",!0)]})),_:1},8,["model"])]})),_:1},8,["modelValue","onClose"])}var a=n(14048),s=n(30388),u=(n(16280),n(33110),n(26099),{data:function(){return{choose:"login",user:{uid:"",tel:"",password:"",checkPassword:"",uname:""},dialogVisible:!1}},methods:{openDialog:function(){this.dialogVisible=!0},resetForm:function(){this.user.uid="",this.user.tel="",this.user.password="",this.user.checkPassword="",this.user.uname=""},signIn:function(){var e=this;return(0,s.A)((0,a.A)().mark((function t(){var n,r;return(0,a.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.user.checkPassword===e.user.password){t.next=3;break}return e.$message.error("两次输入的密码不一致!"),t.abrupt("return");case 3:return t.prev=3,t.next=6,fetch("http://localhost:4050/register_user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e.user)});case 6:if(n=t.sent,n.ok){t.next=9;break}throw new Error("HTTP error! status: ".concat(n.status));case 9:return t.next=11,n.json();case 11:r=t.sent,201===r.code?(e.$message.success("注册成功!"),localStorage.setItem("uid",r.data.uid),e.dialogVisible=!1):e.$message.error(r.message||"注册失败"),t.next=19;break;case 15:t.prev=15,t.t0=t["catch"](3),console.error("请求失败：",t.t0),e.$message.error("注册失败!");case 19:case"end":return t.stop()}}),t,null,[[3,15]])})))()},login:function(){var e=this;return(0,s.A)((0,a.A)().mark((function t(){var n,r;return(0,a.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("http://localhost:4050/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tel:e.user.tel,password:e.user.password})});case 3:if(n=t.sent,n.ok){t.next=6;break}throw new Error("HTTP error! status: ".concat(n.status));case 6:return t.next=8,n.json();case 8:r=t.sent,200===r.code?(localStorage.setItem("uid",r.data.uid),e.$message.success("登录成功!"),e.dialogVisible=!1,e.$emit("login-success")):e.$message.error("密码或账号错误!"),t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](0),console.error("请求失败：",t.t0),e.$message.error("密码或账号错误!");case 16:case"end":return t.stop()}}),t,null,[[0,12]])})))()}}}),c=n(71241);const i=(0,c.A)(u,[["render",o],["__scopeId","data-v-57084a68"]]);var l=i},61475:function(e,t,n){n.d(t,{A:function(){return H}});n(62010);var r=n(56768),o=n(24232),a={class:"post-card-container"},s={class:"header-section"},u=["src"],c={class:"user-info"},i={class:"user-name"},l={class:"publish-time"},d={class:"content-section"},p={class:"content"},f=["src"],m={class:"actions-section",style:{display:"flex","justify-content":"flex-end","align-items":"center"}},h={style:{"margin-left":"5px"}},g={key:0,class:"comments-section"},v={class:"comment-input-section",style:{display:"flex","align-items":"flex-start"}},k=["src"],b={class:"comment-header"},y=["src"],x={class:"comment-info"},w={class:"comment-user-info"},A={class:"comment-user-name"},_={class:"comment-content"},C={class:"comment-time"};function L(e,t,n,L,T,S){var P=(0,r.g2)("Comment"),F=(0,r.g2)("el-icon"),V=(0,r.g2)("StarFilled"),j=(0,r.g2)("el-input"),E=(0,r.g2)("el-button");return(0,r.uX)(),(0,r.CE)("div",a,[(0,r.Lk)("div",s,[(0,r.Lk)("img",{src:n.post.user.avatar,alt:"Avatar",class:"avatar"},null,8,u),(0,r.Lk)("div",c,[(0,r.Lk)("span",i,(0,o.v_)(n.post.user.name),1),(0,r.Lk)("span",l,(0,o.v_)(n.post.publishTime),1)])]),(0,r.Lk)("div",d,[(0,r.Lk)("p",p,(0,o.v_)(n.post.content),1),n.post.image?((0,r.uX)(),(0,r.CE)("img",{key:0,src:n.post.image,alt:"Post Image",class:"post-image"},null,8,f)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",m,[(0,r.bF)(F,{onClick:L.toggleComments,style:{cursor:"pointer","margin-right":"10px","font-size":"24px"}},{default:(0,r.k6)((function(){return[(0,r.bF)(P)]})),_:1},8,["onClick"]),(0,r.Lk)("div",{style:{display:"flex","align-items":"center",cursor:"pointer"},onClick:t[0]||(t[0]=function(){return L.likePost&&L.likePost.apply(L,arguments)})},[(0,r.bF)(F,{style:{"font-size":"24px"}},{default:(0,r.k6)((function(){return[(0,r.bF)(V)]})),_:1}),(0,r.Lk)("span",h,(0,o.v_)(L.localPost.likes),1)])]),L.showComments?((0,r.uX)(),(0,r.CE)("div",g,[(0,r.Lk)("div",v,[(0,r.Lk)("img",{src:L.currentUserAvatar,alt:"Avatar",class:"avatar",style:{width:"40px",height:"40px","border-radius":"50%"}},null,8,k),(0,r.bF)(j,{modelValue:L.newComment,"onUpdate:modelValue":t[1]||(t[1]=function(e){return L.newComment=e}),placeholder:"发表评论",size:"large",class:"comment-input",style:{width:"610px","margin-left":"10px"}},null,8,["modelValue"]),(0,r.bF)(E,{round:"",onClick:L.submitComment,style:{"margin-left":"40px",height:"40px"}},{default:(0,r.k6)((function(){return t[2]||(t[2]=[(0,r.eW)("评论")])})),_:1},8,["onClick"])]),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(L.localPost.comment,(function(e,t){return(0,r.uX)(),(0,r.CE)("div",{key:t,class:"comment-item"},[(0,r.Lk)("div",b,[(0,r.Lk)("img",{src:e.avatar,alt:"Avatar",class:"comment-avatar",style:{width:"30px",height:"30px","border-radius":"50%"}},null,8,y),(0,r.Lk)("div",x,[(0,r.Lk)("div",w,[(0,r.Lk)("span",A,(0,o.v_)(e.userName)+":",1),(0,r.Lk)("span",_,(0,o.v_)(e.c_info),1)]),(0,r.Lk)("span",C,(0,o.v_)(e.c_time),1)])])])})),128))])):(0,r.Q3)("",!0)])}var T=n(74721),S=n(3604),P=n(14048),F=n(30388),V=n(41034),j=(n(16280),n(44114),n(33110),n(26099),n(42762),n(90144)),E={props:{post:Object},setup:function(e,t){var n=t.emit,o=(0,j.KR)(""),a=(0,j.KR)(""),s=(0,j.Kh)((0,V.A)((0,V.A)({},e.post),{},{comment:[],likes:e.post.likes||0})),u=(0,j.KR)(!1),c=(0,j.KR)(""),i=function(){var e=(0,F.A)((0,P.A)().mark((function e(){var t,n,r;return(0,P.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("uid"),t){e.next=4;break}return console.error("UID 未找到"),e.abrupt("return");case 4:return e.prev=4,e.next=7,fetch("http://localhost:4050/get_user_info?uid=".concat(t),{method:"GET",headers:{"Content-Type":"application/json"}});case 7:if(n=e.sent,n.ok){e.next=10;break}throw new Error("HTTP error! status: ".concat(n.status));case 10:return e.next=12,n.json();case 12:r=e.sent,200===r.code?(o.value=r.data.avatar,console.log("hxiusnidcnsncneincenc",o.value),a.value=r.data.uname):console.error("获取用户信息失败:",r.message),e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](4),console.error("用户信息加载失败:",e.t0);case 19:case"end":return e.stop()}}),e,null,[[4,16]])})));return function(){return e.apply(this,arguments)}}(),l=function(){var t=(0,F.A)((0,P.A)().mark((function t(){var n,r,o,a,u,c;return(0,P.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=(0,S.A)(s.comment),t.prev=1,n.s();case 3:if((r=n.n()).done){t.next=25;break}return o=r.value,a=o.uid,t.prev=6,t.next=9,fetch("http://localhost:4050/get_user_info?uid=".concat(a),{method:"GET",headers:{"Content-Type":"application/json"}});case 9:if(u=t.sent,!u.ok){t.next=17;break}return t.next=13,u.json();case 13:c=t.sent,200===c.code?(o.avatar=c.data.avatar,o.userName=c.data.uname,console.log((0,V.A)({},e.post))):console.error("获取用户头像失败：".concat(c.message)),t.next=18;break;case 17:console.error("获取用户信息失败");case 18:t.next=23;break;case 20:t.prev=20,t.t0=t["catch"](6),console.error("获取用户信息时发生错误:",t.t0);case 23:t.next=3;break;case 25:t.next=30;break;case 27:t.prev=27,t.t1=t["catch"](1),n.e(t.t1);case 30:return t.prev=30,n.f(),t.finish(30);case 33:case"end":return t.stop()}}),t,null,[[1,27,30,33],[6,20]])})));return function(){return t.apply(this,arguments)}}(),d=function(){var t=(0,F.A)((0,P.A)().mark((function t(){var n,r;return(0,P.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(e.post.id),console.log("http://localhost:4050/get_comments_by_pid?pid=".concat(e.post.id)),t.prev=2,t.next=5,fetch("http://localhost:4050/get_comments_by_pid?pid=".concat(e.post.id),{method:"GET",headers:{"Content-Type":"application/json"}});case 5:if(n=t.sent,!n.ok){t.next=16;break}return t.next=9,n.json();case 9:return r=t.sent,s.comment=r.data,t.next=13,l();case 13:console.log(r.data),t.next=17;break;case 16:console.error("获取评论失败");case 17:t.next=22;break;case 19:t.prev=19,t.t0=t["catch"](2),console.error("评论加载错误:",t.t0);case 22:case"end":return t.stop()}}),t,null,[[2,19]])})));return function(){return t.apply(this,arguments)}}(),p=function(){var e=(0,F.A)((0,P.A)().mark((function e(){return(0,P.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(u.value=!u.value,!u.value){e.next=4;break}return e.next=4,d();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var t=(0,F.A)((0,P.A)().mark((function t(){var r,o;return(0,P.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("/api/like/".concat(e.post.id),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({postId:e.post.id})});case 3:if(r=t.sent,!r.ok){t.next=11;break}return t.next=7,r.json();case 7:o=t.sent,200===o.code?(s.likes=o.likes,n("like",e.post.id,s.likes)):console.error("点赞失败:",o.message),t.next=12;break;case 11:console.error("点赞请求失败");case 12:t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](0),console.error("点赞请求失败:",t.t0);case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(){return t.apply(this,arguments)}}(),m=function(){var t=(0,F.A)((0,P.A)().mark((function t(){var r,u;return(0,P.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!c.value.trim()){t.next=12;break}return r={user:{avatar:o.value,name:a.value},content:c.value,time:(new Date).toLocaleString()},t.prev=2,t.next=5,fetch("/api/comments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uid:localStorage.getItem("uid"),postId:e.post.id,c_info:r.content,c_time:r.time})});case 5:u=t.sent,u.ok?(console.log("评论成功"),n("comment",e.post.id,r),s.comments.push(r),c.value=""):console.error("评论提交失败"),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](2),console.error("评论提交失败:",t.t0);case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(){return t.apply(this,arguments)}}();return(0,r.nT)((function(){s.comments=(0,T.A)(e.post.comments)})),(0,r.sV)((function(){i()})),{localPost:s,showComments:u,newComment:c,toggleComments:p,likePost:f,submitComment:m,currentUserAvatar:o,userName:a}}},O=n(71241);const I=(0,O.A)(E,[["render",L],["__scopeId","data-v-e528a040"]]);var H=I}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.m=e,function(){var e=[];n.O=function(t,r,o,a){if(!r){var s=1/0;for(l=0;l<e.length;l++){r=e[l][0],o=e[l][1],a=e[l][2];for(var u=!0,c=0;c<r.length;c++)(!1&a||s>=a)&&Object.keys(n.O).every((function(e){return n.O[e](r[c])}))?r.splice(c--,1):(u=!1,a<s&&(s=a));if(u){e.splice(l--,1);var i=o();void 0!==i&&(t=i)}}return t}a=a||0;for(var l=e.length;l>0&&e[l-1][2]>a;l--)e[l]=e[l-1];e[l]=[r,o,a]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))}}(),function(){n.u=function(e){return"js/"+e+"-legacy."+{91:"f7db14bf",648:"4f5fa249"}[e]+".js"}}(),function(){n.miniCssF=function(e){return"css/"+e+"."+{91:"d46dc4aa",648:"0d68bc9a"}[e]+".css"}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="405quan:";n.l=function(r,o,a,s){if(e[r])e[r].push(o);else{var u,c;if(void 0!==a)for(var i=document.getElementsByTagName("script"),l=0;l<i.length;l++){var d=i[l];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+a){u=d;break}}u||(c=!0,u=document.createElement("script"),u.charset="utf-8",u.timeout=120,n.nc&&u.setAttribute("nonce",n.nc),u.setAttribute("data-webpack",t+a),u.src=r),e[r]=[o];var p=function(t,n){u.onerror=u.onload=null,clearTimeout(f);var o=e[r];if(delete e[r],u.parentNode&&u.parentNode.removeChild(u),o&&o.forEach((function(e){return e(n)})),t)return t(n)},f=setTimeout(p.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=p.bind(null,u.onerror),u.onload=p.bind(null,u.onload),c&&document.head.appendChild(u)}}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.p="/"}(),function(){if("undefined"!==typeof document){var e=function(e,t,r,o,a){var s=document.createElement("link");s.rel="stylesheet",s.type="text/css",n.nc&&(s.nonce=n.nc);var u=function(n){if(s.onerror=s.onload=null,"load"===n.type)o();else{var r=n&&n.type,u=n&&n.target&&n.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+r+": "+u+")");c.name="ChunkLoadError",c.code="CSS_CHUNK_LOAD_FAILED",c.type=r,c.request=u,s.parentNode&&s.parentNode.removeChild(s),a(c)}};return s.onerror=s.onload=u,s.href=t,r?r.parentNode.insertBefore(s,r.nextSibling):document.head.appendChild(s),s},t=function(e,t){for(var n=document.getElementsByTagName("link"),r=0;r<n.length;r++){var o=n[r],a=o.getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(a===e||a===t))return o}var s=document.getElementsByTagName("style");for(r=0;r<s.length;r++){o=s[r],a=o.getAttribute("data-href");if(a===e||a===t)return o}},r=function(r){return new Promise((function(o,a){var s=n.miniCssF(r),u=n.p+s;if(t(s,u))return o();e(r,u,null,o,a)}))},o={524:0};n.f.miniCss=function(e,t){var n={91:1,648:1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=r(e).then((function(){o[e]=0}),(function(t){throw delete o[e],t})))}}}(),function(){var e={524:0};n.f.j=function(t,r){var o=n.o(e,t)?e[t]:void 0;if(0!==o)if(o)r.push(o[2]);else{var a=new Promise((function(n,r){o=e[t]=[n,r]}));r.push(o[2]=a);var s=n.p+n.u(t),u=new Error,c=function(r){if(n.o(e,t)&&(o=e[t],0!==o&&(e[t]=void 0),o)){var a=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;u.message="Loading chunk "+t+" failed.\n("+a+": "+s+")",u.name="ChunkLoadError",u.type=a,u.request=s,o[1](u)}};n.l(s,c,"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,r){var o,a,s=r[0],u=r[1],c=r[2],i=0;if(s.some((function(t){return 0!==e[t]}))){for(o in u)n.o(u,o)&&(n.m[o]=u[o]);if(c)var l=c(n)}for(t&&t(r);i<s.length;i++)a=s[i],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(l)},r=self["webpackChunk_405quan"]=self["webpackChunk_405quan"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=n.O(void 0,[504],(function(){return n(54866)}));r=n.O(r)})();
//# sourceMappingURL=app-legacy.9ca4e9d8.js.map