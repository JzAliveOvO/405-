{"version":3,"file":"js/648-legacy.5329eaeb.js","mappings":"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","sources":["webpack://405quan/./src/components/Personal.vue","webpack://405quan/./src/components/Personal.vue?c4a7"],"sourcesContent":["<template>\r\n  <div class=\"common-layout\">\r\n    <el-container>\r\n      <el-header class=\"header\">\r\n        <Header />\r\n      </el-header>\r\n      <el-main style=\"padding: 0px;\">\r\n        <div class=\"main\">\r\n          <!-- 新增的自我介绍卡片，固定在左边 -->\r\n          <div class=\"profile-card-wrapper\">\r\n            <el-card class=\"profile-card\" style=\"width: 250px;\">\r\n              <div class=\"profile-header\">\r\n                <img :src=\"user.avatar\" alt=\"Avatar\" class=\"profile-avatar\" />\r\n                <div class=\"profile-info\">\r\n                  <span class=\"profile-name\">{{ user.name }}</span>\r\n                  <span class=\"profile-signature\">{{ user.signature }}</span>\r\n                </div>\r\n              </div>\r\n              <div class=\"profile-stats\">\r\n                <div class=\"profile-stat\">\r\n                  <span class=\"stat-label\">总说说数:</span>\r\n                  <span>{{ user.totalPosts }}</span>\r\n                </div>\r\n                <div class=\"profile-stat\">\r\n                  <span class=\"stat-label\">总访客量:</span>\r\n                  <span>{{ user.totalVisitors }}</span>\r\n                </div>\r\n                <div class=\"profile-stat\">\r\n                  <span class=\"stat-label\">总点赞量:</span>\r\n                  <span>{{ user.totalLikes }}</span>\r\n                </div>\r\n              </div>\r\n            </el-card>\r\n          </div>\r\n\r\n             <!-- 用于发表说说的卡片 -->\r\n             <div class=\"post-form-wrapper\">\r\n              <el-card class=\"post-form-card\" style=\"width: 850px; margin-bottom: 10px;\">\r\n              <el-input\r\n                type=\"textarea\"\r\n                v-model=\"newPostContent\"\r\n                placeholder=\"有什么新鲜事想分享吗？\"\r\n                rows=\"3\"\r\n              />\r\n              <el-upload \r\n                action=\"\" \r\n                list-type=\"picture-card\" \r\n                :auto-upload=\"false\"\r\n                :on-change=\"handleSuccess\">\r\n              <el-icon><Plus /></el-icon>\r\n\r\n              <template #file=\"{ file }\">\r\n                <div>\r\n                  <img class=\"el-upload-list__item-thumbnail\" :src=\"file.url\" alt=\"\" />\r\n                  <span class=\"el-upload-list__item-actions\">\r\n                    <span\r\n                      class=\"el-upload-list__item-preview\"\r\n                      @click=\"handlePictureCardPreview(file)\"\r\n                    >\r\n                      <el-icon><zoom-in /></el-icon>\r\n                    </span>\r\n                    <span\r\n                      v-if=\"!disabled\"\r\n                      class=\"el-upload-list__item-delete\"\r\n                      @click=\"handleDownload(file)\"\r\n                    >\r\n                      <el-icon><Download /></el-icon>\r\n                    </span>\r\n                    <span\r\n                      v-if=\"!disabled\"\r\n                      class=\"el-upload-list__item-delete\"\r\n                      @click=\"handleRemove(file)\"\r\n                    >\r\n                      <el-icon><Delete /></el-icon>\r\n                    </span>\r\n                  </span>\r\n                </div>\r\n              </template>\r\n            </el-upload>\r\n\r\n            <el-dialog v-model=\"dialogVisible\">\r\n              <img w-full :src=\"dialogImageUrl\" alt=\"Preview Image\" />\r\n            </el-dialog>\r\n              <el-button\r\n                type=\"primary\"\r\n                @click=\"publishPost\"\r\n                style=\"margin-top: 10px;\"\r\n              >\r\n                发表说说\r\n              </el-button>\r\n            </el-card>\r\n\r\n          </div>\r\n\r\n          <!-- 原来的说说卡片展示 -->\r\n          <div class=\"card-wrapper\">\r\n            <el-card v-for=\"post in posts\" :key=\"post.id\" class=\"post-card\" style=\"width: 850px; margin-bottom: 10px;\">\r\n              <PostCard :post=\"post\" @comment=\"handleComment\" @like=\"handleLike\" />\r\n            </el-card>\r\n          </div>\r\n        </div>\r\n      </el-main>\r\n    </el-container>\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\nimport Header from '@/components/Header.vue';\r\nimport PostCard from '@/components/PostCard.vue';\r\nimport axios from 'axios'\r\nimport { ref, onMounted } from 'vue';\r\nimport { ElMessage,Delete, Download, Plus, ZoomIn} from 'element-plus';\r\n\r\nexport default {\r\n  components: {\r\n    Header,\r\n    PostCard,\r\n  },\r\n  \r\n  setup() {\r\n    const dialogImageUrl = ref('')\r\n    const dialogVisible = ref(false)\r\n    const disabled = ref(false)\r\n    const posts = ref([]);\r\n    const newPostContent = ref(''); // 新增的说说内容\r\n    const uploadedImage = ref(null); // 上传的图片\r\n    const uid = localStorage.getItem('uid'); // 用户uid\r\n    const uname = ref('');\r\n    const uploadRef = ref(null);\r\n\r\n\r\n    const handleRemove = (file) => {\r\n      console.log(file)\r\n    }\r\n\r\n    const handlePictureCardPreview = (file) => {\r\n      dialogImageUrl.value = file.url\r\n      dialogVisible.value = true\r\n      console.log(dialogImageUrl.value,file.url)\r\n    }\r\n\r\n    const handleDownload = (file) => {\r\n      console.log(file)\r\n      console.log(file.raw)\r\n      dialogImageUrl.value = file.raw\r\n      console.log(dialogImageUrl.value)\r\n    }\r\n    const handleSuccess = (file) => {\r\n      dialogImageUrl.value = file.raw;\r\n      console.log(file.raw)\r\n      console.log(dialogImageUrl.value)\r\n    }\r\n    //检验uid是否存在\r\n    if (uid) {\r\n      console.log('用户ID:', uid);\r\n    } else {\r\n      console.log('没有找到用户ID');\r\n    }\r\n    const fetchPosts = async () => {\r\n      try {\r\n        const response = await fetch('http://localhost:4050/get_all_posts', {\r\n          method: 'GET',\r\n          headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n      });\r\n      if (!response.ok) {\r\n      throw new Error(`HTTP error! status: ${response.status}`);\r\n      }\r\n      const data = await response.json();\r\n      if (data.code === 200) {\r\n        console.log(data);\r\n        // 传递说说信息\r\n        const filteredPosts = data.data.filter(post => post.user.name === uname.value);\r\n        // 设置说说数据\r\n        posts.value = filteredPosts;\r\n        // 计算个人说说数量和个人总点赞数量\r\n        user.value.totalPosts = posts.value.length;\r\n        user.value.totalLikes = filteredPosts.reduce((total, post) => total + post.likes, 0);\r\n      } else {\r\n        ElMessage.error(data.message || \"获取个人说说信息失败\");\r\n      }\r\n      } catch (error) {\r\n        console.error('请求失败：', error);\r\n        ElMessage.error(\"获取个人说说信息失败!\");\r\n      }\r\n    };\r\n    // API获取用户数据\r\n    const getUserData = async () => {\r\n      if (!uid) {\r\n        ElMessage.error(\"用户丢失\");\r\n        console.log('缺少uid');\r\n        return;\r\n      }\r\n      try {\r\n        const response = await fetch(`http://localhost:4050/get_user_info?uid=${uid}`, {\r\n          method: 'GET',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n        });\r\n        if (!response.ok) {\r\n          throw new Error(`HTTP error! status: ${response.status}`);\r\n        }\r\n        const data = await response.json(); // 返回数据处理并且存储在 data 中\r\n        if (data.code === 200) { // 成功获取数据，对数据进行处理\r\n          console.log(data.message);\r\n          // 处理其他用户信息\r\n          uname.value = data.data.uname;\r\n\r\n        } else {\r\n          ElMessage.error(data.message || \"获取用户信息失败\");\r\n        }\r\n      } catch (error) {\r\n        console.error('请求失败：', error);\r\n        ElMessage.error(\"获取用户信息失败!\");\r\n      }\r\n    };\r\n    onMounted(() => {\r\n      getUserData();\r\n      fetchPosts();\r\n    });\r\n\r\n    const handleComment = (postId, comment) => {\r\n      console.log(`评论说说 ${postId}: ${comment.content}`);\r\n    };\r\n\r\n    const handleLike = (postId) => {\r\n      const post = posts.value.find(p => p.id === postId);\r\n      if (post) {\r\n        post.likes += 1;\r\n      }\r\n    };\r\n\r\n    const user = ref({\r\n      avatar:'',\r\n      name: '',\r\n      signature: '',\r\n      totalPosts: '',\r\n      totalVisitors:'',\r\n      totalLikes: ''\r\n    });\r\n\r\n    const publishPost = async () => {\r\n      if (!newPostContent.value) {\r\n        ElMessage.error('内容不能为空！');\r\n        return;\r\n      }\r\n\r\n      // 创建 FormData 对象并添加文本和图片字段\r\n      const formData = new FormData();\r\n      formData.append('content', newPostContent.value);\r\n      formData.append('uid', localStorage.getItem('uid'));\r\n      formData.append('image', dialogImageUrl.value);\r\n      console.log(dialogImageUrl.value);\r\n\r\n      // 调试：输出 FormData 内容\r\n      formData.forEach((value, key) => {\r\n        console.log(key, value);\r\n      });\r\n\r\n      try {\r\n        const response = await axios.post('http://localhost:4050/add_post', formData, {\r\n          headers: {\r\n            'Content-Type': 'multipart/form-data',\r\n          },\r\n        });\r\n\r\n        if (response.data.code === 200) {\r\n          ElMessage.success('发表成功！');\r\n          newPostContent.value = ''; // 清空输入框\r\n          uploadedImage.value = null; // 清空图片\r\n        } else {\r\n          ElMessage.error('发布失败！');\r\n        }\r\n      } catch (error) {\r\n        ElMessage.error('发布失败！');\r\n      }\r\n    };\r\n\r\n\r\n  \r\n\r\n\r\n    return {\r\n      posts,\r\n      handleComment,\r\n      handleLike,\r\n      user,\r\n      uid,\r\n      getUserData,\r\n      uname,\r\n      newPostContent,\r\n      uploadedImage,\r\n      publishPost,\r\n      dialogImageUrl,\r\n      dialogVisible,\r\n      disabled,\r\n      handleRemove,\r\n      handlePictureCardPreview,\r\n      handleDownload,\r\n      handleSuccess,\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.main {\r\n  width: 100%;\r\n  height: 90%; /* 减去 Header 的高度 */\r\n  background-color: #f0f0f0;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: flex-start;\r\n  padding-top: 10px;\r\n}\r\n\r\n.card-wrapper {\r\n  width: 70%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n\r\n.post-card {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.header {\r\n  position: sticky;\r\n  top: 0;\r\n  z-index: 10;\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\n.profile-card-wrapper {\r\n  position: sticky;\r\n  top: 100px; /* 固定位置，从 Header 底部开始 */\r\n  flex-shrink: 0;\r\n  margin-right: 0px;\r\n}\r\n\r\n.profile-card {\r\n  padding: 20px;\r\n  background-color: white;\r\n  border-radius: 8px;\r\n}\r\n\r\n.profile-header {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.profile-avatar {\r\n  width: 60px;\r\n  height: 60px;\r\n  border-radius: 50%;\r\n  margin-right: 15px;\r\n}\r\n\r\n.profile-info {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.profile-name {\r\n  font-weight: bold;\r\n  font-size: 18px;\r\n}\r\n\r\n.profile-signature {\r\n  font-size: 14px;\r\n  color: #888;\r\n}\r\n\r\n.profile-stats {\r\n  margin-top: 20px;\r\n}\r\n\r\n.profile-stat {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.stat-label {\r\n  font-weight: bold;\r\n}\r\n\r\n.card-wrapper {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n\r\n.post-form-wrapper {\r\n  width: 70%;\r\n  display: flex;\r\n  justify-content: center;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.post-form-card {\r\n  width: 100%;\r\n}\r\n\r\n.upload-demo {\r\n  margin-top: 10px;\r\n}\r\n</style>\r\n","import { render } from \"./Personal.vue?vue&type=template&id=5b319889&scoped=true\"\nimport script from \"./Personal.vue?vue&type=script&lang=js\"\nexport * from \"./Personal.vue?vue&type=script&lang=js\"\n\nimport \"./Personal.vue?vue&type=style&index=0&id=5b319889&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5b319889\"]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","_createVNode","_component_el_container","default","_withCtx","_component_el_header","_component_Header","_","_component_el_main","style","_createElementVNode","_hoisted_2","_hoisted_3","_component_el_card","_hoisted_4","src","$setup","user","avatar","alt","_hoisted_5","_hoisted_6","_hoisted_7","_toDisplayString","name","_hoisted_8","signature","_hoisted_9","_hoisted_10","totalPosts","_hoisted_11","totalVisitors","_hoisted_12","totalLikes","_hoisted_13","_component_el_input","type","modelValue","newPostContent","_cache","$event","placeholder","rows","_component_el_upload","action","handleSuccess","file","_ref","url","_hoisted_14","_hoisted_15","onClick","handlePictureCardPreview","_component_el_icon","_component_zoom_in","_hoisted_16","disabled","_createCommentVNode","key","handleDownload","_component_Download","_hoisted_17","handleRemove","_component_Delete","_hoisted_18","_component_Plus","_component_el_dialog","dialogVisible","dialogImageUrl","_hoisted_19","_component_el_button","publishPost","_createTextVNode","_hoisted_20","_Fragment","_renderList","posts","post","_createBlock","id","_component_PostCard","onComment","handleComment","onLike","handleLike","components","Header","PostCard","setup","ref","uploadedImage","uid","localStorage","getItem","uname","console","log","value","raw","fetchPosts","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","data","filteredPosts","wrap","_context","prev","next","fetch","method","headers","sent","ok","Error","concat","status","json","code","filter","length","reduce","total","likes","ElMessage","error","message","t0","stop","apply","arguments","getUserData","_ref2","_callee2","_context2","abrupt","onMounted","postId","comment","content","find","p","_ref3","_callee3","formData","_context3","FormData","append","forEach","axios","success","__exports__","render"],"sourceRoot":""}